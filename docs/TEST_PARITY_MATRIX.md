# Test Parity Matrix (Fabric Unification)

Purpose: Map retired legacy subsystems and their test suites to the fabric
replacements and confirm coverage parity. Use this to track any gaps that still
need new unit/integration/E2E coverage.

Legend:

- Status: DONE / PARTIAL / TODO

| Legacy Capability / Suite                       | Fabric Replacement                                          | Coverage (examples of tests)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Status / Notes |
| ----------------------------------------------- | ----------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- |
| Federated RPC mesh + HELLO broadcast            | Fabric catalog + federation planner + fabric RPC forwarding | `tests/test_federated_rpc_integration.py`, `tests/test_federated_rpc_system.py`, `tests/integration/test_unified_rpc_federation.py`, `tests/integration/test_fabric_rpc_forwarding.py`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | DONE           |
| Unified router impl                             | Fabric router + routing engine                              | `tests/test_fabric_router_impl.py`, `tests/test_fabric_routing_engine.py`, `tests/test_fabric_function_routing_engine.py`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | DONE           |
| Federated topic exchange                        | Fabric pubsub router + forwarding                           | `tests/test_fabric_pubsub_router.py`, `tests/test_fabric_pubsub_forwarding.py`, `tests/integration/test_fabric_pubsub_forwarding.py`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | DONE           |
| Federated queue gossip + delivery               | Fabric queue federation + delivery coordinator              | `tests/test_fabric_queue_federation.py`, `tests/test_fabric_queue_delivery.py`, `tests/integration/test_fabric_queue_federation.py`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | DONE           |
| Cache gossip + cache federation bridge          | Fabric cache protocol + transport                           | `tests/test_cache_federation_transport.py`, `tests/test_global_cache.py`, `tests/test_fabric_cache_federation_adapter.py`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | DONE           |
| Cluster discovery + function propagation        | Fabric catalog gossip + peer directory                      | `tests/test_fabric_catalog.py`, `tests/test_fabric_catalog_delta.py`, `tests/test_fabric_peer_directory.py`, `tests/integration/test_gossip_auto_discovery.py`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | DONE           |
| Route announcements / mesh reroute              | Fabric path-vector route control                            | `tests/test_fabric_route_announcer.py`, `tests/test_fabric_route_gossip.py`, `tests/test_fabric_route_control.py`, `tests/test_fabric_route_security.py`, `tests/test_fabric_route_keys.py`, `tests/test_fabric_route_key_provider.py`, `tests/test_fabric_route_key_gossip.py`, `tests/test_fabric_route_policy_directory.py`, `tests/test_fabric_route_withdrawal.py`, `tests/integration/test_fabric_route_withdrawal_integration.py`, `tests/integration/test_fabric_route_churn_suppression.py`, `tests/integration/test_fabric_route_scale_validation.py`, `tests/integration/test_fabric_route_policy_reload.py`, `tests/integration/test_fabric_route_export_targeting.py` | DONE           |
| Transport endpoint advertisement + peer dialing | Adapter registry + catalog `transport_endpoints`            | `tests/test_transport_adapter.py`, `tests/test_fabric_function_registry_adapter.py`, `tests/test_fabric_catalog.py`, `tests/integration/test_unified_system_basic.py::test_peer_connections_use_transport_endpoints`                                                                                                                                                                                                                                                                                                                                                                                                                                                               | DONE           |
| Cross-federation boundaries                     | Fabric federation config + policy                           | `tests/test_federation_config_system.py`, `tests/integration/test_federation_boundaries_comprehensive.py`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | DONE           |
| Federation bridge circuit breaker               | Fabric transport circuit breaker                            | `tests/test_transport_enhancements.py`, `tests/test_websocket_transport.py`, `tests/test_tcp_transport.py`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | DONE           |
| Federation monitoring endpoints                 | Fabric monitoring endpoints                                 | `tests/test_federation_monitoring_endpoints.py`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | DONE           |
| Geo/latency-aware cache selection               | Cache profile catalog + selector                            | `tests/test_fabric_cache_selection.py`, `tests/test_fabric_cache_profile_adapter.py`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | DONE           |
| Catalog TTL resiliency                          | Fabric catalog refresh loop                                 | `tests/integration/test_gossip_auto_discovery.py::test_catalog_refresh_keeps_nodes_alive`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | DONE           |
| Large-cluster soak + churn                      | Fabric routing + peer discovery                             | `tests/test_fabric_soak_churn.py`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | DONE           |
| Optional link-state routing                     | Link-state control plane                                    | `tests/test_fabric_link_state.py`, `tests/integration/test_fabric_link_state_gossip.py`, `tests/integration/test_fabric_route_scale_validation.py::test_link_state_mesh_supports_ecmp_paths`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | DONE           |
| Raft transport unification                      | Fabric Raft transport + server wiring                       | `tests/test_fabric_raft_transport.py`, `tests/integration/test_fabric_raft_integration.py`, `tests/test_leader_election_network_adapter.py`, `tests/test_live_raft_integration.py`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | DONE           |
| Persistence + metadata snapshots                | Unified persistence + fabric catalog/route key snapshots    | `tests/test_persistence_framework.py`, `tests/integration/test_persistence_restart.py`, `tests/test_fabric_snapshot_serialization.py`, `tests/integration/test_fabric_snapshot_restart.py`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | DONE           |

Open gaps to audit (if any)

- None noted. Add coverage if new parity gaps are discovered.
